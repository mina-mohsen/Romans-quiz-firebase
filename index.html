<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ø³Ø§Ù„Ø© ÙƒÙˆØ±Ù†Ø«ÙˆØ³ Ø§Ù„Ø£ÙˆÙ„Ù‰ (ÙƒØ§Ù…Ù„Ø©)</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #d35400;
            --success: #27ae60;
            --danger: #c0392b;
            --light: #f4f7f6;
            --white: #ffffff;
            --skipped: #f39c12;
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; -webkit-tap-highlight-color: transparent; }

        body { 
            background-color: #bdc3c7; 
            margin: 0; 
            padding: 10px; 
            display: flex; 
            justify-content: center; 
            align-items: flex-start;
            min-height: 100vh;
        }

        .container { 
            width: 100%; 
            max-width: 600px; 
            background: var(--white); 
            padding: 15px; 
            border-radius: 20px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.15); 
        }
        
        header { text-align: center; border-bottom: 2px solid var(--light); padding-bottom: 10px; margin-bottom: 15px; position: sticky; top: 0; background: var(--white); z-index: 10; }
        h1 { font-size: 1.2rem; margin: 10px 0; color: var(--primary); }

        #timer-box { background: #fdedec; color: var(--danger); padding: 5px 15px; border-radius: 50px; font-weight: 800; font-size: 1.1rem; display: inline-block; border: 2px solid var(--danger); }
        
        .screen { display: none; flex-direction: column; gap: 15px; }
        .active-screen { display: flex; }

        label { font-size: 0.9rem; font-weight: bold; color: var(--primary); margin-bottom: -10px; margin-right: 5px; }
        input { padding: 12px; border: 2px solid #ddd; border-radius: 12px; font-size: 1rem; width: 100%; }

        .btn-main { background: var(--primary); color: white; padding: 14px; border: none; border-radius: 12px; font-size: 1rem; font-weight: bold; cursor: pointer; transition: transform 0.1s; }
        .btn-main:active { transform: scale(0.97); }
        .btn-skip { background: #ecf0f1; color: var(--secondary); border: 1px solid #bdc3c7; margin-top: 5px; }

        .option-item { background: #f8f9f9; padding: 14px; border-radius: 12px; cursor: pointer; border: 2px solid #ebedef; margin-bottom: 8px; text-align: right; }
        .option-item.selected { background: #ebf5fb; border-color: var(--primary); font-weight: bold; }

        .nav-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(35px, 1fr)); gap: 6px; margin-top: 20px; padding-top: 15px; border-top: 2px solid #eee; }
        .nav-dot { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; background: #eee; border-radius: 8px; font-size: 0.8rem; cursor: pointer; }
        .nav-dot.current { background: var(--primary); color: white; border: 2px solid #34495e; }
        .nav-dot.answered { background: var(--success); color: white; }
        .nav-dot.skipped { background: var(--skipped); color: white; }

        .review-card { padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #eee; font-size: 0.9rem; text-align: right; }
        .review-card.correct-card { border-right: 5px solid var(--success); background: #f0f9f4; }
        .review-card.wrong-card { border-right: 5px solid var(--danger); background: #fdf2f2; }
        .ref-tag { color: var(--accent); font-weight: bold; font-size: 0.85rem; display: block; margin-top: 5px; }

        .block-message { text-align: center; color: var(--danger); font-weight: bold; padding: 20px; }
        
        #status-msg { font-size: 0.85rem; margin-top: 5px; text-align: center; color: var(--primary); }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ø³Ø§Ù„Ø© ÙƒÙˆØ±Ù†Ø«ÙˆØ³ Ø§Ù„Ø£ÙˆÙ„Ù‰ (1-16)</h1>
        <div id="timer-box" style="display:none;">25:00</div>
    </header>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø­Ø¸Ø± -->
    <div id="block-screen" class="screen">
        <div class="block-message">
            <h2>Ø¹Ø°Ø±Ø§Ù‹!</h2>
            <p>Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø­Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø². Ù„Ø¶Ù…Ø§Ù† ØªÙƒØ§ÙØ¤ Ø§Ù„ÙØ±ØµØŒ ÙŠÙØ³Ù…Ø­ Ø¨Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·.</p>
            <p style="font-size: 0.8rem; color: #95a5a6; margin-top: 20px;">(Ø¥Ø°Ø§ ÙƒÙ†Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ÙƒØªØ§Ø¨Ø© ÙƒÙˆØ¯ Ø§Ù„Ù…Ø³Ø­ ÙÙŠ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„)</p>
            <button class="btn-main" onclick="switchScreen('reg-screen')">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ¬Ø±Ø¨Ø© ÙƒÙˆØ¯ Ø§Ù„Ù…Ø³Ø­</button>
        </div>
    </div>

    <!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
    <div id="reg-screen" class="active-screen screen">
        <div style="text-align: center;"><img src="https://imgur.com/hH7HWvE.jpeg" style="width: 100px; height: 100px; border-radius: 50%;" alt="logo"></div>
        <input type="text" id="u-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
        <input type="tel" id="u-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„">
        <input type="text" id="u-address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø§Ù„Ù…Ù†Ø·Ù‚Ø© / Ø§Ù„ÙƒÙ†ÙŠØ³Ø©)">
        <label for="u-birthdate">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:</label>
        <input type="date" id="u-birthdate">
        <button class="btn-main" onclick="startQuiz()">Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
    <div id="quiz-screen" class="screen">
        <div id="q-wrapper"></div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <button class="btn-main" style="background:#95a5a6;" onclick="nav(-1)">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
            <button class="btn-main" onclick="nav(1)">Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>
        <button class="btn-main btn-skip" onclick="skipCurrent()">ØªØ£Ø¬ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ (Ù„Ø§Ø­Ù‚Ø§Ù‹)</button>
        <button id="finish-btn" class="btn-main" style="background:var(--success); display: none; margin-top: 5px;" onclick="finishQuiz()">Ø¥Ù†Ù‡Ø§Ø¡ ÙˆØ­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
        <div class="nav-grid" id="nav-grid"></div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ© -->
    <div id="finish-screen" class="screen">
        <div style="text-align:center;">
            <h2 style="color: var(--success);">Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±!</h2>
            <div id="final-score" style="font-size: 3.5rem; font-weight: bold; color: var(--primary);">0/50</div>
            
            <div id="status-msg"></div>

            <button class="btn-main" style="background:#25D366; margin-bottom: 10px; width: 100%; margin-top:15px;" onclick="sendToWhatsApp()">Ø¥Ø±Ø³Ø§Ù„ Ù†Ø³Ø®Ø© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</button>
            <button class="btn-main" style="background:#3498db; width: 100%;" onclick="toggleReview()">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
        </div>
        <div id="review-list" style="display:none; margin-top: 20px; border-top: 2px solid #eee; padding-top: 20px;"></div>
    </div>
</div>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyGvzORDW-DEuH9RSH3Mpk05xalEzOAeGraC8wo0jjPcdJX02TFy1Z04x8Kkf5qv89dIw/exec";

    const questions = [
        { q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ Ø°ÙƒØ±Ù‡ Ø¨ÙˆÙ„Ø³ ÙƒØ£Ø® Ø£Ø±Ø³Ù„ Ù…Ø¹Ù‡ Ø§Ù„ØªØ­ÙŠØ© ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŸ", options: ["ØªÙŠÙ…ÙˆØ«Ø§ÙˆØ³", "Ø³ÙˆØ³Ø«Ø§Ù†ÙŠØ³", "Ù„ÙˆÙ‚Ø§", "Ø³ÙŠÙ„Ø§"], correct: 1, ref: "1:1" },
        { q: "Ø£ÙŠÙ† ÙƒØ§Ù† Ø§Ù„Ø­ÙƒÙŠÙ…ØŸ Ø£ÙŠÙ† Ø§Ù„ÙƒØ§ØªØ¨ØŸ Ø£ÙŠÙ† Ù…Ø¨Ø§Ø­Ø« Ù‡Ø°Ø§ Ø§Ù„Ø¯Ù‡Ø±ØŸ Ø£Ù„Ù… ÙŠØ¬Ù‡Ù„ Ø§Ù„Ù„Ù‡... Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", options: ["Ù‚ÙˆØ©", "Ø¬Ù…Ø§Ù„", "Ø­ÙƒÙ…Ø©", "Ø¹Ø¸Ù…Ø©"], correct: 2, ref: "1:20" },
        { q: "Ù„Ø£Ù†Ù†ÙŠ Ù„Ù… Ø£Ø¹Ø²Ù… Ø£Ù† Ø£Ø¹Ø±Ù Ø´ÙŠØ¦Ø§ Ø¨ÙŠÙ†ÙƒÙ… Ø¥Ù„Ø§... ÙˆØ¥ÙŠØ§Ù‡ Ù…ØµÙ„ÙˆØ¨Ø§ØŸ", options: ["Ø§Ù„Ø±ÙˆØ­ Ø§Ù„Ù‚Ø¯Ø³", "ÙŠØ³ÙˆØ¹ Ø§Ù„Ù…Ø³ÙŠØ­", "Ø§Ù„Ø¢Ø¨ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ", "Ù†Ø§Ù…ÙˆØ³ Ù…ÙˆØ³Ù‰"], correct: 1, ref: "2:2" },
        { q: "Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ù„Ø§ ÙŠÙ‚Ø¨Ù„ Ù…Ø§ Ù„Ø±ÙˆØ­ Ø§Ù„Ù„Ù‡ Ù„Ø£Ù†Ù‡ Ø¹Ù†Ø¯Ù‡...ØŸ", options: ["ØµØ¹Ø¨", "Ù…Ø³ØªØ­ÙŠÙ„", "Ø¬Ù‡Ø§Ù„Ø©", "ÙÙ„Ø³ÙØ©"], correct: 2, ref: "2:14" },
        { q: "Ø£Ù†Ø§ ØºØ±Ø³Øª ÙˆØ£Ø¨Ù„ÙˆØ³ Ø³Ù‚Ù‰ Ù„ÙƒÙ† Ø§Ù„Ù„Ù‡ ÙƒØ§Ù†...ØŸ", options: ["ÙŠÙ†Ø¸Ø±", "ÙŠÙ…Ø¯Ø­", "ÙŠÙ†Ù…ÙŠ", "ÙŠØ¹ÙŠÙ†"], correct: 2, ref: "3:6" },
        { q: "Ù„Ø§ ÙŠØ³ØªØ·ÙŠØ¹ Ø£Ø­Ø¯ Ø£Ù† ÙŠØ¶Ø¹ Ø£Ø³Ø§Ø³Ø§ Ø¢Ø®Ø± ØºÙŠØ± Ø§Ù„Ø°ÙŠ ÙˆÙØ¶Ø¹ØŒ Ø§Ù„Ø°ÙŠ Ù‡Ùˆ...ØŸ", options: ["Ø¨ÙˆÙ„Ø³", "Ø¨Ø·Ø±Ø³", "ÙŠØ³ÙˆØ¹ Ø§Ù„Ù…Ø³ÙŠØ­", "Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡"], correct: 2, ref: "3:11" },
        { q: "Ø£Ù…Ø§ ØªØ¹Ù„Ù…ÙˆÙ† Ø£Ù†ÙƒÙ…... Ø§Ù„Ù„Ù‡ØŒ ÙˆØ±ÙˆØ­ Ø§Ù„Ù„Ù‡ ÙŠØ³ÙƒÙ† ÙÙŠÙƒÙ…ØŸ", options: ["Ø´Ø¹Ø¨", "Ù‡ÙŠÙƒÙ„", "Ø£Ø¨Ù†Ø§Ø¡", "Ø±Ø¹ÙŠØ©"], correct: 1, ref: "3:16" },
        { q: "Ù‡ÙƒØ°Ø§ ÙÙ„ÙŠØ­Ø³Ø¨Ù†Ø§ Ø§Ù„Ø¥Ù†Ø³Ø§Ù† ÙƒØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø³ÙŠØ­ Ùˆ... Ø£Ø³Ø±Ø§Ø± Ø§Ù„Ù„Ù‡ØŸ", options: ["Ø­ÙØ¸Ø©", "ÙˆÙƒÙ„Ø§Ø¡", "Ù…ÙØ³Ø±ÙŠ", "ØªÙ„Ø§Ù…ÙŠØ°"], correct: 1, ref: "4:1" },
        { q: "Ù„Ø£Ù†Ù‡ Ø¥Ù† ÙƒØ§Ù† Ù„ÙƒÙ… Ø±Ø¨ÙˆØ§Øª Ù…Ù† Ø§Ù„Ù…Ø±Ø´Ø¯ÙŠÙ† ÙÙŠ Ø§Ù„Ù…Ø³ÙŠØ­ØŒ Ù„ÙƒÙ† Ù„ÙŠØ³... ÙƒØ«ÙŠØ±ÙˆÙ†ØŸ", options: ["Ù…Ø¹Ù„Ù…ÙˆÙ†", "Ø¢Ø¨Ø§Ø¡", "Ø£ØµØ¯Ù‚Ø§Ø¡", "Ø±Ø³Ù„"], correct: 1, ref: "4:15" },
        { q: "Ø¹Ø²Ù„ Ø§Ù„Ø®Ø¨ÙŠØ« Ù…Ù† ÙˆØ³Ø·ÙƒÙ… ÙƒØ§Ù† Ø¨Ø³Ø¨Ø¨ Ø®Ø·ÙŠØ©...ØŸ", options: ["Ø§Ù„Ø³Ø±Ù‚Ø©", "Ø§Ù„Ø²Ù†Ø§", "Ø§Ù„ÙƒØ°Ø¨", "Ø§Ù„Ù‚ØªÙ„"], correct: 1, ref: "5:1" },
        { q: "Ø£Ù„Ø³ØªÙ… ØªØ¹Ù„Ù…ÙˆÙ† Ø£Ù†Ù†Ø§ Ø³Ù†Ø¯ÙŠÙ†...ØŸ ÙÙƒÙ… Ø¨Ø§Ù„Ø£Ø­Ø±Ù‰ Ø£Ù…ÙˆØ± Ù‡Ø°Ù‡ Ø§Ù„Ø­ÙŠØ§Ø©ØŸ", options: ["Ø§Ù„Ø¹Ø§Ù„Ù…", "Ø§Ù„Ù…Ù„Ø§Ø¦ÙƒØ©", "Ø§Ù„Ø´ÙŠØ§Ø·ÙŠÙ†", "Ø§Ù„Ø£Ù…Ù…"], correct: 1, ref: "6:3" },
        { q: "ÙƒÙ„ Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ ØªØ­Ù„ Ù„ÙŠ Ù„ÙƒÙ† Ù„ÙŠØ³ ÙƒÙ„ Ø§Ù„Ø£Ø´ÙŠØ§Ø¡...ØŸ", options: ["ØªØ¨Ù†ÙŠ", "ØªÙˆØ§ÙÙ‚", "ØªÙ†ÙØ¹", "ØªØ®Ù„Øµ"], correct: 2, ref: "6:12" },
        { q: "Ø§Ù‡Ø±Ø¨ÙˆØ§ Ù…Ù†... ÙƒÙ„ Ø®Ø·ÙŠØ© ÙŠÙØ¹Ù„Ù‡Ø§ Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ù‡ÙŠ Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¬Ø³Ø¯ØŸ", options: ["Ø§Ù„Ø·Ù…Ø¹", "Ø§Ù„Ø²Ù†Ø§", "Ø§Ù„ØºØ¶Ø¨", "Ø§Ù„Ø­Ø³Ø¯"], correct: 1, ref: "6:18" },
        { q: "Ø¨Ù…Ø§Ø°Ø§ Ù†ØµØ­ Ø¨ÙˆÙ„Ø³ ØºÙŠØ± Ø§Ù„Ù…ØªØ²ÙˆØ¬ÙŠÙ† ÙˆØ§Ù„Ø£Ø±Ø§Ù…Ù„ØŸ", options: ["Ø£Ù† ÙŠØªØ²ÙˆØ¬ÙˆØ§ ÙÙˆØ±Ø§Ù‹", "Ø£Ù† ÙŠØ¨Ù‚ÙˆØ§ ÙƒÙ…Ø§ Ù‡Ùˆ", "Ø£Ù† ÙŠØªØ±Ù‡Ø¨ÙˆØ§", "Ù„Ù… ÙŠÙ†ØµØ­Ù‡Ù…"], correct: 1, ref: "7:8" },
        { q: "Ù„Ø£Ù†ÙƒÙ… Ù‚Ø¯ Ø§Ø´ØªØ±ÙŠØªÙ…... ÙÙ…Ø¬Ø¯ÙˆØ§ Ø§Ù„Ù„Ù‡ ÙÙŠ Ø£Ø¬Ø³Ø§Ø¯ÙƒÙ… ÙˆÙÙŠ Ø£Ø±ÙˆØ§Ø­ÙƒÙ…ØŸ", options: ["Ø¨Ø«Ù…Ù†", "Ø¨Ø§Ù„Ø¯Ù…", "Ø¨Ø§Ù„Ù†Ø¹Ù…Ø©", "Ø¨Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†"], correct: 0, ref: "6:20" },
        { q: "Ø§Ù„Ø¹Ù„Ù… ÙŠÙ†ÙØ® ÙˆÙ„ÙƒÙ† Ø§Ù„Ù…Ø­Ø¨Ø©...ØŸ", options: ["ØªØ³ØªØ±", "ØªØ¨Ù†ÙŠ", "ØªÙ†Ù…ÙŠ", "ÙŠØ¹ÙŠÙ†"], correct: 1, ref: "8:1" },
        { q: "ÙŠÙ‚ÙˆÙ„ Ø¨ÙˆÙ„Ø³: Ø¥Ù† ÙƒØ§Ù† Ø·Ø¹Ø§Ù… ÙŠØ¹Ø«Ø± Ø£Ø®ÙŠØŒ ÙÙ„Ù† Ø£ÙƒÙ„... Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¨Ø¯ØŸ", options: ["Ø®Ø¨Ø²Ø§Ù‹", "Ù„Ø­Ù…Ø§Ù‹", "ÙØ§ÙƒÙ‡Ø©", "Ø³Ù…ÙƒØ§Ù‹"], correct: 1, ref: "8:13" },
        { q: "Ø£Ù„Ø³Øª Ø£Ù†Ø§ Ø±Ø³ÙˆÙ„Ø§ØŸ Ø£Ù„Ø³Øª Ø£Ù†Ø§ Ø­Ø±Ø§ØŸ Ø£Ù…Ø§ Ø±Ø£ÙŠØª... Ø±Ø¨Ù†Ø§ØŸ", options: ["Ø§Ù„Ù…Ù„Ø§Ø¦ÙƒØ©", "ÙŠØ³ÙˆØ¹ Ø§Ù„Ù…Ø³ÙŠØ­", "Ø§Ù„Ø³Ù…Ø§Ø¡", "Ø§Ù„Ø±Ø¤Ù‰"], correct: 1, ref: "9:1" },
        { q: "ØµØ±Øª Ù„Ù„ÙƒÙ„ ÙƒÙ„ Ø´ÙŠØ¡ Ù„Ø£Ø®Ù„Øµ Ø¹Ù„Ù‰ ÙƒÙ„ Ø­Ø§Ù„...ØŸ", options: ["Ø§Ù„Ø¬Ù…ÙŠØ¹", "Ù‚ÙˆÙ…Ø§Ù‹", "Ø§Ù„ÙŠÙ‡ÙˆØ¯", "Ø§Ù„ÙŠÙˆÙ†Ø§Ù†ÙŠÙŠÙ†"], correct: 1, ref: "9:22" },
        { q: "ÙƒÙ„ Ù…Ù† ÙŠØ¬Ø§Ù‡Ø¯ ÙŠØ¶Ø¨Ø· Ù†ÙØ³Ù‡ ÙÙŠ ÙƒÙ„ Ø´ÙŠØ¡ØŒ Ø£ÙˆÙ„Ø¦Ùƒ Ù„ÙƒÙŠ ÙŠØ£Ø®Ø°ÙˆØ§ Ø¥ÙƒÙ„ÙŠÙ„Ø§Ù‹...ØŸ", options: ["Ø°Ù‡Ø¨ÙŠØ§Ù‹", "ÙŠÙÙ†Ù‰", "Ù„Ø§ ÙŠÙÙ†Ù‰", "Ø¨Ù‡ÙŠØ§Ù‹"], correct: 1, ref: "9:25" },
        { q: "Ù„Ù… ØªØµØ¨ÙƒÙ… ØªØ¬Ø±Ø¨Ø© Ø¥Ù„Ø§ Ø¨Ø´Ø±ÙŠØ©ØŒ ÙˆÙ„ÙƒÙ† Ø§Ù„Ù„Ù‡... Ù„Ø§ ÙŠØ¯Ø¹ÙƒÙ… ØªÙØ¬Ø±Ø¨ÙˆÙ† ÙÙˆÙ‚ Ù…Ø§ ØªØ³ØªØ·ÙŠØ¹ÙˆÙ†ØŸ", options: ["Ù‚ÙˆÙŠ", "Ù…Ø­Ø¨", "Ø£Ù…ÙŠÙ†", "Ø¹Ø§Ø¯Ù„"], correct: 2, ref: "10:13" },
        { q: "ÙØ¥Ø°Ø§ ÙƒÙ†ØªÙ… ØªØ£ÙƒÙ„ÙˆÙ† Ø£Ùˆ ØªØ´Ø±Ø¨ÙˆÙ† Ø£Ùˆ ØªÙØ¹Ù„ÙˆÙ† Ø´ÙŠØ¦Ø§ØŒ ÙØ§ÙØ¹Ù„ÙˆØ§ ÙƒÙ„ Ø´ÙŠØ¡ Ù„Ù€...ØŸ", options: ["Ù…Ø¬Ø¯ Ø§Ù„Ù„Ù‡", "Ø±Ø§Ø­Ø© Ø£Ù†ÙØ³ÙƒÙ…", "Ø¥Ø±Ø¶Ø§Ø¡ Ø§Ù„Ù†Ø§Ø³", "Ø¨Ù†Ø§Ø¡ Ø§Ù„ÙƒÙ†ÙŠØ³Ø©"], correct: 0, ref: "10:31" },
        { q: "ÙƒÙˆÙ†ÙˆØ§ Ù…ØªÙ…Ø«Ù„ÙŠÙ† Ø¨ÙŠ ÙƒÙ…Ø§ Ø£Ù†Ø§ Ø£ÙŠØ¶Ø§Ù‹ Ø¨Ù€...ØŸ", options: ["Ø¨Ø·Ø±Ø³", "Ø§Ù„Ù…Ø³ÙŠØ­", "Ù…ÙˆØ³Ù‰", "Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡"], correct: 1, ref: "11:1" },
        { q: "Ø§Ù„Ø±Ø¬Ù„ Ù‡Ùˆ Ø±Ø£Ø³ Ø§Ù„Ù…Ø±Ø£Ø© ÙƒÙ…Ø§ Ø£Ù† Ø§Ù„Ù…Ø³ÙŠØ­ Ù‡Ùˆ Ø±Ø£Ø³...ØŸ", options: ["Ø§Ù„ÙƒÙ†ÙŠØ³Ø©", "ÙƒÙ„ Ø±Ø¬Ù„", "Ø§Ù„Ø¹Ø§Ù„Ù…", "Ø§Ù„Ø±Ø³Ù„"], correct: 1, ref: "11:3" },
        { q: "Ù…Ù† Ø£ÙƒÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø®Ø¨Ø² Ø£Ùˆ Ø´Ø±Ø¨ ÙƒØ£Ø³ Ø§Ù„Ø±Ø¨ Ø¨Ø¯ÙˆÙ† Ø§Ø³ØªØ­Ù‚Ø§Ù‚ØŒ ÙŠÙƒÙˆÙ† Ù…Ø¬Ø±Ù…Ø§Ù‹ ÙÙŠ...ØŸ", options: ["Ø­Ù‚ Ø§Ù„ÙƒÙ†ÙŠØ³Ø©", "Ø¬Ø³Ø¯ Ø§Ù„Ø±Ø¨ ÙˆØ¯Ù…Ù‡", "Ø­Ù‚ Ø§Ù„ÙÙ‚Ø±Ø§Ø¡", "Ø§Ù„Ù†Ø§Ù…ÙˆØ³"], correct: 1, ref: "11:27" },
        { q: "Ø£Ù†ÙˆØ§Ø¹ Ù…ÙˆØ§Ù‡Ø¨ Ù…ÙˆØ¬ÙˆØ¯Ø© ÙˆÙ„ÙƒÙ† Ø§Ù„Ø±ÙˆØ­...ØŸ", options: ["ÙƒØ«ÙŠØ±", "ÙˆØ§Ø­Ø¯", "Ù‚Ø¯ÙˆØ³", "Ù‚ÙˆÙŠ"], correct: 1, ref: "12:4" },
        { q: "Ø£Ù„Ø¹Ù„ Ø§Ù„Ø¬Ù…ÙŠØ¹ Ø±Ø³Ù„? Ø£Ù„Ø¹Ù„ Ø§Ù„Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø¨ÙŠØ§Ø¡? Ø£Ù„Ø¹Ù„ Ø§Ù„Ø¬Ù…ÙŠØ¹...ØŸ", options: ["Ø±Ø¹Ø§Ø©", "Ù…Ø¹Ù„Ù…ÙˆÙ†", "Ø´Ù…Ø§Ù…Ø³Ø©", "Ù‚Ø¯ÙŠØ³ÙˆÙ†"], correct: 1, ref: "12:29" },
        { q: "Ø¥Ù† ÙƒÙ†Øª Ø£ØªÙƒÙ„Ù… Ø¨Ø£Ù„Ø³Ù†Ø© Ø§Ù„Ù†Ø§Ø³ ÙˆØ§Ù„Ù…Ù„Ø§Ø¦ÙƒØ© ÙˆÙ„ÙƒÙ† Ù„ÙŠØ³ Ù„ÙŠ Ù…Ø­Ø¨Ø©ØŒ ÙÙ‚Ø¯ ØµØ±Øª...ØŸ", options: ["Ø´Ø®ØµØ§Ù‹ Ø¨Ø§Ø±Ø§Ù‹", "Ù†Ø­Ø§Ø³Ø§Ù‹ ÙŠØ·Ù†", "Ø±Ø³ÙˆÙ„Ø§Ù‹ Ø¹Ø¸ÙŠÙ…Ø§Ù‹", "ØµÙ…ØªØ§Ù‹"], correct: 1, ref: "13:1" },
        { q: "Ø§Ù„Ù…Ø­Ø¨Ø© Ù„Ø§ ØªØ³Ù‚Ø· Ø£Ø¨Ø¯Ø§Ù‹ØŒ ÙˆØ£Ù…Ø§ Ø§Ù„Ù†Ø¨ÙˆØ§Øª ÙØ³ØªØ¨Ø·Ù„ ÙˆØ§Ù„Ø£Ù„Ø³Ù†Ø©...ØŸ", options: ["Ø³ØªØ¨Ù‚Ù‰", "Ø³ØªÙ†ØªÙ‡ÙŠ", "Ø³ØªØ¹Ø¸Ù…", "Ø³ØªÙ‚ÙˆÙ‰"], correct: 1, ref: "13:8" },
        { q: "Ø£Ù…Ø§ Ø§Ù„Ø¢Ù† ÙÙŠØ«Ø¨Øª: Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† ÙˆØ§Ù„Ø±Ø¬Ø§Ø¡ ÙˆØ§Ù„Ù…Ø­Ø¨Ø©ØŒ Ù‡Ø°Ù‡ Ø§Ù„Ø«Ù„Ø§Ø«Ø© ÙˆÙ„ÙƒÙ† Ø£Ø¹Ø¸Ù…Ù‡Ù†...ØŸ", options: ["Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†", "Ø§Ù„Ø±Ø¬Ø§Ø¡", "Ø§Ù„Ù…Ø­Ø¨Ø©", "Ø§Ù„ØµØ¨Ø±"], correct: 2, ref: "13:13" },
        { q: "Ù…Ù† ÙŠØªÙƒÙ„Ù… Ø¨Ù„Ø³Ø§Ù† ÙŠØ¨Ù†ÙŠ Ù†ÙØ³Ù‡ØŒ ÙˆØ£Ù…Ø§ Ù…Ù† ÙŠØªÙ†Ø¨Ø£ ÙÙŠØ¨Ù†ÙŠ...ØŸ", options: ["Ø§Ù„Ø±ÙˆØ­", "Ø§Ù„ÙƒÙ†ÙŠØ³Ø©", "Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†", "Ø§Ù„Ù…Ø¬ØªÙ…Ø¹"], correct: 1, ref: "14:4" },
        { q: "Ù„ØªÙƒÙ† ÙƒÙ„ Ø£Ø´ÙŠØ§Ø¡ Ø¨Ù„ÙŠØ§Ù‚Ø© ÙˆØ¨Ø­Ø³Ø¨...ØŸ", options: ["Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†", "ØªØ±ØªÙŠØ¨", "Ø§Ù„Ù…Ø¹Ø±ÙØ©", "Ø§Ù„Ø±Ø¤ÙŠØ©"], correct: 1, ref: "14:40" },
        { q: "Ø¥Ù† Ù„Ù… ÙŠÙƒÙ† Ø§Ù„Ù…Ø³ÙŠØ­ Ù‚Ø¯ Ù‚Ø§Ù…ØŒ ÙØ¨Ø§Ø·Ù„Ø© ÙƒØ±Ø§Ø²ØªÙ†Ø§ ÙˆØ¨Ø§Ø·Ù„ Ø£ÙŠØ¶Ø§Ù‹...ØŸ", options: ["ØµÙˆÙ…ÙƒÙ…", "Ø¥ÙŠÙ…Ø§Ù†ÙƒÙ…", "Ø¹Ù…Ù„ÙƒÙ…", "Ø¬Ù‡Ø§Ø¯ÙƒÙ…"], correct: 1, ref: "15:14" },
        { q: "ÙÙŠ Ø¢Ø¯Ù… ÙŠÙ…ÙˆØª Ø§Ù„Ø¬Ù…ÙŠØ¹ØŒ ÙˆÙÙŠ Ø§Ù„Ù…Ø³ÙŠØ­ Ø³ÙŠÙØ­ÙŠØ§...ØŸ", options: ["Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†", "Ø§Ù„Ø¬Ù…ÙŠØ¹", "Ø§Ù„Ø£Ø¨Ø±Ø§Ø±", "Ø§Ù„ØªÙ„Ø§Ù…ÙŠØ°"], correct: 1, ref: "15:22" },
        { q: "Ø¢Ø®Ø± Ø¹Ø¯Ùˆ ÙŠØ¨Ø·Ù„ Ù‡Ùˆ...ØŸ", options: ["Ø§Ù„Ø´ÙŠØ·Ø§Ù†", "Ø§Ù„Ù…ÙˆØª", "Ø§Ù„Ø®Ø·ÙŠØ¦Ø©", "Ø§Ù„Ø¹Ø§Ù„Ù…"], correct: 1, ref: "15:26" },
        { q: "Ø§Ù„Ù…Ø¹Ø§Ø´Ø±Ø§Øª Ø§Ù„Ø±Ø¯ÙŠØ© ØªÙØ³Ø¯...ØŸ", options: ["Ø§Ù„Ø­ÙŠØ§Ø©", "Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ Ø§Ù„Ø¬ÙŠØ¯Ø©", "Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†", "Ø§Ù„Ø£Ø¹Ù…Ø§Ù„"], correct: 1, ref: "15:33" },
        { q: "Ø£ÙŠÙ† Ø´ÙˆÙƒØªÙƒ ÙŠØ§...ØŸ Ø£ÙŠÙ† ØºÙ„Ø¨ØªÙƒ ÙŠØ§ Ù‡Ø§ÙˆÙŠØ©ØŸ", options: ["Ø¹Ø¯Ùˆ", "Ù…ÙˆØª", "Ø´ÙŠØ·Ø§Ù†", "ÙˆØ¬Ø¹"], correct: 1, ref: "15:55" },
        { q: "ÙÙŠ ÙƒÙ„ Ø£ÙˆÙ„ Ø£Ø³Ø¨ÙˆØ¹ØŒ Ù„ÙŠØ¶Ø¹ ÙƒÙ„ ÙˆØ§Ø­Ø¯ Ù…Ù†ÙƒÙ… Ø¹Ù†Ø¯Ù‡ØŒ Ø®Ø§Ø²Ù†Ø§ Ù…Ø§ ØªÙŠØ³Ø± Ù„Ø¬Ù…Ø¹...ØŸ", options: ["Ø§Ù„Ø¹Ø´ÙˆØ±", "Ø§Ù„ØµØ¯Ù‚Ø©", "Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©", "Ø§Ù„Ø°Ù‡Ø¨"], correct: 1, ref: "16:2" },
        { q: "Ø§Ø³Ù‡Ø±ÙˆØ§ØŒ Ø§Ø«Ø¨ØªÙˆØ§ ÙÙŠ Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†ØŒ ÙƒÙˆÙ†ÙˆØ§ Ø±Ø¬Ø§Ù„Ø§Ù‹...ØŸ", options: ["Ø­ÙƒÙ…Ø§Ø¡", "ØªÙ‚ÙˆÙˆØ§", "ØµØ§Ø¨Ø±ÙŠÙ†", "Ù…Ø³ØªØ¹Ø¯ÙŠÙ†"], correct: 1, ref: "16:13" },
        { q: "Ù„ØªØµØ± ÙƒÙ„ Ø£Ù…ÙˆØ±ÙƒÙ… ÙÙŠ...ï¼Ÿ", options: ["Ù‡Ø¯ÙˆØ¡", "Ù…Ø­Ø¨Ø©", "Ù†Ø¸Ø§Ù…", "Ø³Ø±Ø¹Ø©"], correct: 1, ref: "16:14" },
        { q: "Ù…Ù† Ù„Ø§ ÙŠØ­Ø¨ Ø§Ù„Ø±Ø¨ ÙŠØ³ÙˆØ¹ Ø§Ù„Ù…Ø³ÙŠØ­ØŒ ÙÙ„ÙŠÙƒÙ†...ØŸ", options: ["Ù…Ù†Ø¨ÙˆØ°Ø§Ù‹", "Ø£Ù†Ø§Ø«ÙŠÙ…Ø§", "Ø¨Ø¹ÙŠØ¯Ø§Ù‹", "Ù…Ø®Ø·Ø¦Ø§Ù‹"], correct: 1, ref: "16:22" },
        { q: "Ù…Ø§ Ù…Ø¹Ù†Ù‰ ÙƒÙ„Ù…Ø© 'Ù…Ø§Ø±Ø§Ù† Ø£Ø«Ø§'ØŸ", options: ["Ø§Ù„Ù„Ù‡ Ù…Ø­Ø¨Ø©", "Ø§Ù„Ø±Ø¨ Ø¢Øª", "Ø³Ù„Ø§Ù… Ù„ÙƒÙ…", "Ø§Ù„Ù…Ø¬Ø¯ Ù„Ù„Ù‡"], correct: 1, ref: "16:22" },
        { q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£ØµØ­Ø§Ø­Ø§Øª Ø±Ø³Ø§Ù„Ø© ÙƒÙˆØ±Ù†Ø«ÙˆØ³ Ø§Ù„Ø£ÙˆÙ„Ù‰ØŸ", options: ["12", "14", "16", "21"], correct: 2, ref: "1-16" },
        { q: "Ø¨Ø´Ø± Ø¨ÙˆÙ„Ø³ Ø£Ù‡Ù„ ÙƒÙˆØ±Ù†Ø«ÙˆØ³ ÙÙŠ Ø±Ø­Ù„ØªÙ‡ Ø§Ù„ØªØ¨Ø´ÙŠØ±ÙŠØ©...ØŸ", options: ["Ø§Ù„Ø£ÙˆÙ„Ù‰", "Ø§Ù„Ø«Ø§Ù†ÙŠØ©", "Ø§Ù„Ø«Ø§Ù„Ø«Ø©", "Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©"], correct: 1, ref: "Ø£Ø¹Ù…Ø§Ù„ 18" },
        { q: "Ø£ÙŠ Ù…ÙˆÙ‡Ø¨Ø© ÙØ¶Ù„Ù‡Ø§ Ø¨ÙˆÙ„Ø³ Ø¹Ù„Ù‰ Ø§Ù„ØªÙƒÙ„Ù… Ø¨Ø£Ù„Ø³Ù†Ø© ÙÙŠ Ø§Ù„Ø£ØµØ­Ø§Ø­ 14ØŸ", options: ["Ø§Ù„Ø´ÙØ§Ø¡", "Ø§Ù„ØªÙ†Ø¨Ø¤", "ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù…", "Ø§Ù„Ù…Ø¹Ø¬Ø²Ø§Øª"], correct: 1, ref: "14:1" },
        { q: "Ù…Ù† Ù‡Ùˆ 'Ø¨Ø§ÙƒÙˆØ±Ø© Ø§Ù„Ø±Ø§Ù‚Ø¯ÙŠÙ†'ØŸ", options: ["Ø¢Ø¯Ù…", "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", "Ø§Ù„Ù…Ø³ÙŠØ­", "Ø¯Ø§ÙˆØ¯"], correct: 2, ref: "15:20" },
        { q: "Ø¨Ø£ÙŠ Ø´ÙŠØ¡ Ø´Ø¨Ù‡ Ø¨ÙˆÙ„Ø³ Ø§Ù„ÙƒÙ†ÙŠØ³Ø© ÙÙŠ Ø§Ù„Ø£ØµØ­Ø§Ø­ 12ØŸ", options: ["Ø¨Ø§Ù„Ø³ÙÙŠÙ†Ø©", "Ø¨Ø§Ù„Ø¬Ø³Ø¯ Ø§Ù„ÙˆØ§Ø­Ø¯", "Ø¨Ø§Ù„ÙƒØ±Ù…Ø©", "Ø¨Ø§Ù„Ø¨Ù†ÙŠØ§Ù†"], correct: 1, ref: "12:12" },
        { q: "Ù…Ù† Ù‡Ù…Ø§ Ø§Ù„Ù„Ø°Ø§Ù† Ø°ÙƒØ± Ø¨ÙˆÙ„Ø³ Ø£Ù†Ù‡Ù…Ø§ Ø£Ø±Ø³Ù„Ø§ Ø³Ù„Ø§Ù…Ø§Ù‹ ÙÙŠ Ø®ØªØ§Ù… Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŸ", options: ["Ø£ÙƒÙŠÙ„Ø§ ÙˆØ¨Ø±ÙŠØ³ÙƒÙ„Ø§", "Ø¨Ø·Ø±Ø³ ÙˆÙŠØ¹Ù‚ÙˆØ¨", "ÙŠÙˆØ­Ù†Ø§ ÙˆÙ…Ø±Ù‚Ø³", "ÙÙŠÙ„Ø¨Ø³ ÙˆØ£Ù†Ø¯Ø±Ø§ÙˆØ³"], correct: 0, ref: "16:19" },
        { q: "Ø§Ù„Ø°ÙŠ ÙŠÙØªØ®Ø± ÙÙ„ÙŠÙØªØ®Ø± Ø¨Ù€...ØŸ", options: ["Ù†ÙØ³Ù‡", "Ø£Ø¹Ù…Ø§Ù„Ù‡", "Ø§Ù„Ø±Ø¨", "Ø­ÙƒÙ…ØªÙ‡"], correct: 2, ref: "1:31" },
        { q: "Ù…Ø­Ø¨Ø© Ø§Ù„Ù…Ø³ÙŠØ­ ØªØ­ØµØ±Ù†Ø§ØŒ ÙˆÙ„ÙƒÙ† ÙÙŠ 1 ÙƒÙˆ 13 Ø§Ù„Ù…Ø­Ø¨Ø© Ù„Ø§...ØŸ", options: ["ØªØªÙØ§Ø®Ø±", "ØªØ³Ù‚Ø· Ø£Ø¨Ø¯Ø§Ù‹", "ØªØ­Ø³Ø¯", "ÙƒÙ„ Ù…Ø§ Ø³Ø¨Ù‚"], correct: 3, ref: "13:4-8" }
    ];

    let current = 0, answers = new Array(questions.length).fill(null), skipped = new Set(), timeLeft = 25 * 60, timer;
    let userData = {};

    window.onload = function() {
        // ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ù„Ù„Ø³Ù…Ø§Ø­ Ù„Ùƒ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø´Ø§Ø´Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø­ØªÙ‰ Ù„Ùˆ ÙƒÙ†Øª Ù…Ø­Ø¸ÙˆØ±Ø§Ù‹ Ù„Ù…Ø³Ø­ Ø§Ù„Ø­Ø¸Ø± Ø¨ÙƒÙˆØ¯ Ø§Ù„Ø³Ø±
        console.log("Ready to start or reset.");
    };

    function startQuiz() {
        const nameInput = document.getElementById('u-name').value.trim();
        
        // ÙØ­Øµ ÙƒÙˆØ¯ Ø§Ù„Ø³Ø± Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù…Ø³Ø­ Ø§Ù„Ø­Ø¸Ø±
        if (nameInput === "admin24724") {
            localStorage.removeItem('quiz_completed_1co');
            alert("ØªÙ… Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¸Ø± Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø¨Ù†Ø¬Ø§Ø­. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¢Ù†.");
            location.reload();
            return;
        }

        // ÙØ­Øµ Ø§Ù„Ø­Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
        if (localStorage.getItem('quiz_completed_1co')) {
            switchScreen('block-screen');
            return;
        }

        userData = {
            name: nameInput,
            phone: document.getElementById('u-phone').value.trim(),
            address: document.getElementById('u-address').value.trim(),
            birthdate: document.getElementById('u-birthdate').value
        };

        if(!userData.name || !userData.phone || !userData.address || !userData.birthdate) return alert("Ø¨Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒØ§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.");
        
        switchScreen('quiz-screen');
        document.getElementById('timer-box').style.display = 'inline-block';
        initQuiz();
        startTimer();
    }

    function initQuiz() {
        const wrapper = document.getElementById('q-wrapper');
        const grid = document.getElementById('nav-grid');
        wrapper.innerHTML = ""; grid.innerHTML = "";
        questions.forEach((q, i) => {
            const div = document.createElement('div');
            div.className = `screen ${i===0?'active-screen':''}`;
            div.id = `q-cnt-${i}`;
            div.innerHTML = `<div style="font-weight:bold; margin-bottom:15px; text-align:right;">${i+1}. ${q.q}</div>${q.options.map((opt, idx) => `<div class="option-item" id="opt-${i}-${idx}" onclick="select(${i}, ${idx})">${opt}</div>`).join('')}`;
            wrapper.appendChild(div);
            
            const dot = document.createElement('div');
            dot.className = `nav-dot ${i===0?'current':''}`;
            dot.id = `dot-${i}`; dot.innerText = i+1; dot.onclick = () => jump(i);
            grid.appendChild(dot);
        });
    }

    function select(qIdx, optIdx) {
        answers[qIdx] = optIdx;
        skipped.delete(qIdx);
        document.querySelectorAll(`#q-cnt-${qIdx} .option-item`).forEach((el, idx) => el.classList.toggle('selected', idx === optIdx));
        const dot = document.getElementById(`dot-${qIdx}`);
        dot.classList.remove('skipped');
        dot.classList.add('answered');
        setTimeout(() => nav(1), 300);
    }

    function skipCurrent() {
        if(answers[current] === null) {
            skipped.add(current);
            document.getElementById(`dot-${current}`).classList.add('skipped');
        }
        nav(1);
    }

    function jump(n) {
        if(n < 0 || n >= questions.length) return;
        document.querySelectorAll('#q-wrapper .screen').forEach(c => c.classList.remove('active-screen'));
        document.querySelectorAll('.nav-dot').forEach(d => d.classList.remove('current'));
        current = n;
        document.getElementById(`q-cnt-${current}`).classList.add('active-screen');
        document.getElementById(`dot-${current}`).classList.add('current');
        document.getElementById('finish-btn').style.display = (current === questions.length - 1) ? 'block' : 'none';
        window.scrollTo(0,0);
    }

    function nav(step) { let t = current + step; if(t >= 0 && t < questions.length) jump(t); }

    function startTimer() {
        timer = setInterval(() => {
            timeLeft--;
            if(timeLeft <= 0) finishQuiz();
            const m = Math.floor(timeLeft/60), s = timeLeft%60;
            document.getElementById('timer-box').innerText = `${m}:${s<10?'0':''}${s}`;
        }, 1000);
    }

    function finishQuiz() {
        clearInterval(timer);
        localStorage.setItem('quiz_completed_1co', 'true');

        let score = 0;
        questions.forEach((q, i) => { if(answers[i] === q.correct) score++; });
        
        document.getElementById('final-score').innerText = `${score}/50`;
        switchScreen('finish-screen');
        document.getElementById('timer-box').style.display = 'none';
        
        saveToGoogleSheets(score);
        generateReview();
    }

    async function saveToGoogleSheets(score) {
        const status = document.getElementById('status-msg');
        status.innerText = "Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ø§Ù„Ø³Ø¬Ù„...";

        const data = {
            ...userData,
            score: score,
            timestamp: new Date().toLocaleString('ar-EG')
        };

        try {
            await fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            status.innerText = "ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ø³Ø¬Ù„ Ø¬ÙˆØ¬Ù„ Ø¨Ù†Ø¬Ø§Ø­ âœ…";
            status.style.color = "var(--success)";
        } catch (error) {
            status.innerText = "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨.";
            status.style.color = "var(--danger)";
        }
    }

    function generateReview() {
        const reviewList = document.getElementById('review-list');
        let html = "";
        questions.forEach((q, i) => {
            const isCorrect = answers[i] === q.correct;
            html += `
                <div class="review-card ${isCorrect ? 'correct-card' : 'wrong-card'}">
                    <b>${i + 1}. ${q.q}</b>
                    <div style="margin-top:5px;">
                        <span>Ø¥Ø¬Ø§Ø¨ØªÙƒ: ${answers[i] !== null ? q.options[answers[i]] : 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©'}</span>
                        ${!isCorrect ? `<br><span style="color:var(--success)">Ø§Ù„ØµØ­ÙŠØ­: ${q.options[q.correct]}</span>` : ''}
                    </div>
                    <span class="ref-tag">Ø§Ù„Ù…Ø±Ø¬Ø¹: (1 ÙƒÙˆ ${q.ref})</span>
                </div>`;
        });
        reviewList.innerHTML = html;
    }

    function toggleReview() {
        const list = document.getElementById('review-list');
        list.style.display = list.style.display === 'none' ? 'block' : 'none';
    }

    function sendToWhatsApp() {
        const myNumber = "971568326116";
        let score = 0;
        questions.forEach((q, i) => { if(answers[i] === q.correct) score++; });

        const message = `*Ù†ØªÙŠØ¬Ø© Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ø³Ø§Ù„Ø© ÙƒÙˆØ±Ù†Ø«ÙˆØ³ Ø§Ù„Ø£ÙˆÙ„Ù‰ (1-16)*%0A` +
                        `--------------------------%0A` +
                        `ğŸ‘¤ *Ø§Ù„Ø§Ø³Ù…:* ${userData.name}%0A` +
                        `ğŸ“ *Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„:* ${userData.phone}%0A` +
                        `ğŸ  *Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:* ${userData.address}%0A` +
                        `ğŸ“… *ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:* ${userData.birthdate}%0A` +
                        `ğŸ† *Ø§Ù„Ø¯Ø±Ø¬Ø©:* ${score} / 50%0A` +
                        `--------------------------`;
        
        window.open(`https://wa.me/${myNumber}?text=${message}`, '_blank');
    }

    function switchScreen(id) { 
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active-screen')); 
        document.getElementById(id).classList.add('active-screen'); 
    }
</script>
</body>
</html>

